<div class="w-full mx-auto p-4 sm:p-6 md:p-8" *transloco="let translate">
    <div class="bg-white rounded-md shadow-sm border border-gray-200">
        <!-- Card Body -->
        <div class="p-4">
            <form class="space-y-4" [formGroup]="formG">
                <!-- Old Password -->
                <div class="flex flex-col md:flex-row items-start md:items-center gap-2">
                    <label for="fpassword" class="md:w-1/4 font-bold text-blue-900">
                        {{translate('preferences.ancienmotdepasse')}}
                    </label>
                    <div class="w-full md:w-2/3">
                        <input formControlName="fpassword" id="password" type="password"
                            class="w-full px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
                    </div>
                </div>

                <!-- New Password -->
                <div class="flex flex-col md:flex-row items-start md:items-center gap-2">
                    <label for="newPassword" class="md:w-1/4 font-bold text-blue-900">
                        {{translate('preferences.nouveaumotdepasse')}}
                    </label>
                    <div class="w-full md:w-2/3">
                        <input formControlName="password" (ngModelChange)="securityLvl()" id="newPassword"
                            type="password"
                            class="w-full px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
                    </div>
                </div>

                <!-- Password Strength Indicator -->
                <div *ngIf="level != -1" class="flex flex-col md:flex-row items-start md:items-center gap-2">
                    <label class="md:w-1/4"></label>
                    <div class="w-full md:w-2/3">
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <div class="h-2.5 rounded-full transition-all duration-300" [ngClass]="{
                    'bg-red-500': level == 1,
                    'bg-yellow-500': level == 2,
                    'bg-green-500': level == 3
                  }" [style.width.%]="level * 33"></div>
                        </div>
                    </div>
                </div>

                <!-- Confirm Password -->
                <div class="flex flex-col md:flex-row items-start md:items-center gap-2">
                    <label for="confirmPassword" class="md:w-1/4 font-bold text-blue-900">
                        {{translate('preferences.confirmationnouveaumotdepasse')}}
                    </label>
                    <div class="w-full md:w-2/3">
                        <input formControlName="confirmPassword" (ngModelChange)="textLeave()" id="confirmPassword"
                            type="password"
                            class="w-full px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
                    </div>
                    <label *ngIf="invalid" class="text-red-500 text-sm md:ml-2">
                        {{translate('preferences.modepassenonidentique')}}
                    </label>
                </div>

                <!-- Forgot Password -->
                <div class="flex flex-col md:flex-row items-start md:items-center gap-2">
                    <label class="md:w-1/4"></label>
                    <div class="w-full md:w-2/3">
                        <a class="text-blue-500 hover:underline cursor-pointer" (click)="resetPw()">
                            {{translate('preferences.modepaseoublier')}}
                        </a>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-col md:flex-row items-start md:items-center gap-2">
                    <div class="md:w-1/4"></div>
                    <div class="w-full md:w-2/3 flex flex-col sm:flex-row sm:justify-end gap-2">
                        <button type="button" (click)="clear()"
                            class="flex items-center px-2 py-1 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50">
                            <i class="fas fa-undo mr-2"></i> {{translate('common.annuler')}}
                        </button>

                        <button type="button" [disabled]="!formG.valid || !levelBool"
                            (click)="isloading ? false : edit()"
                            class="flex items-center px-2 py-1 bg-blue-500 border border-transparent rounded-md text-white hover:bg-blue-600">
                            <i [class]="isloading ? 'fas fa-circle-notch fa-spin mr-2' : 'fas fa-edit mr-2'"></i>
                            {{translate('common.modifier')}}
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>